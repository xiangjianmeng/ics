# 3: IBC Design Principles

**This is an explanation of the "design principles" of IBC.**

**For definitions of terms used in IBC specifications, see [here](./1_IBC_TERMINOLOGY.md).**

**For an architectural overview, see [here](./2_IBC_ARCHITECTURE.md).**

**For a set of example use cases, see [here](./4_IBC_USECASES.md).**

**For a discussion of design patterns, see [here](./5_IBC_DESIGN_PATTERNS.md).**

The design space of "interblockchain communication protocols" is wide, and the term itself has become a bit too all-encompassing. The "Interblockchain Communication Protocol" (IBC) is a very particular point in that design space, chosen to provide specific versatility, locality, modularity, and efficiency properties for the expected interchain ecosystem of interoperable blockchains. This document outlines the "why" of IBC and enumerates the primary high-level design goals.

## 多功能性

IBC 被设计为通用协议。 该协议支持异构区块链，这些链的状态机用不同的语言来实现。在 IBC 上编写的应用可以被组合起来，并且 IBC 协议本身可以实现自动化。

### 异构性

IBC 可以由满足要求的任何共识算法和状态机（较短的最终确定时间、恒定大小的状态承诺和简洁的承诺证明）来实现。 IBC 协议处理数据身份验证、传输和排序（这是任何多链应用程序的共同要求），但与应用程序本身的语义无关。 通过 IBC 连接的异构链必须足够了解兼容的应用程序层接口（例如通证转移接口），但是一旦通过IBC接口处理程序，状态机就可以支持任意定制的功能（例如摒弃部分交易）。

### 组合性

协议开发者和用户都可以将在 IBC 之上编写的应用程序组合在一起。 IBC 定义了一组用于身份验证、传输和排序的原型，以及一组用于资产和数据语义的应用层标准。 支持兼容标准的链可以连接在一起，选择去创建这一连接（或重用连接）的任何用户可以进行交易。资产和数据可以在多个链上自动（“多跳”）和手动中继（ 通过依次发送几个 IBC 中继交易）。

### 自动性

IBC 中的“用户”或“参与者”（具有启动连接、创建频道、发送数据包、报告拜占庭欺诈等行为）可以是但不一定是人类。 模块、智能合约和自动化的练下进程可以利用该协议（例如，要支付用于计算的燃料成本），并可以自行采取行动或协同行动。 设计跨多个链的复杂交互（例如利用三步连接去握手或者多跳的通证转移），使得除了单一初始行为外的所有动作都可以从用户的定义中抽象出来。 最终，我们有可能实现：自动启动一个新的区块链（模块化物理基础设施配置）、启动 IBC 连接、并完全自动地使用新建链的状态机和流量。

## 模块性

IBC 被设计为模块化协议。 该协议被构造为一系列具有明确安全属性和要求的分层组件。 特定层上组件的实现可以有所不同（例如不同的共识算法或连接建立过程），只要它们为高层提供必要的属性（例如最终确定性，< 1/3 拜占庭安全或在两条链上嵌入受信任的状态）。 状态机仅需要了解 IBC 协议的兼容子集（例如，轻客户端对彼此共识的验证算法）即可安全地进行交互。

## 局部性

IBC被设计为本地协议，这意味着仅由两个连接链的信息才能推断出 IBC 双向连接的安全性和正确性。 身份验证原型的安全性要求仅涉及连接中的区块链的共识算法和验证者集合。一条链仅需要了解所连接的链的状态信息就已经足够了（不论那些链背后是否还连接其他的链）。

### 通信和信息的局部性

IBC 对其运行的区块链网络的拓扑结构不做任何假设，也不依赖任何特征。 无需查看全局的区块链网络拓扑：安全性和正确性可以由两条链之间的单个连接和对网络拓扑中的子图的分析推理得出。用户和链可以由给定的他们已知的和假定正确的网络图就可以推验证假设和推断风险。

IBC 中不需要一条“根链”——整个网络的某些子网可能会演变成中心辐射状结构，其他子网可能与其保持连接，其他子网可能仍采用更奇特的拓扑结构。 通道是端到端的，在第一个版本中，IBC 仅支持单跳路径，但将来将支持多跳路径（尽管由于涉及共识算法正确性假设，因此自动路由不一定存在可能性和安全性）。

但是，应用数据可能具有协议参与者需要注意的显著的非本地属性，例如通证的原始区域（可能已在复杂的多跳路径上发送），原始权益和为其提供跨链交易验证的验证人身份信息，或与管理 non-fungible 通证私钥管理相关联的原始智能合约。 IBC 协议本身不需要理解这些非本地属性，但是需要用户和更高级别的应用程序需要。

### 正确假设和安全的局部性

IBC 的参与者（在链或智能合约层面以上）选择将哪些共识算法、状态机和验证人假定为行为端正的（以某种特定的方式运行，例如仅会出现小于 1/3 的拜占庭行为）以及以哪种方式去做这个假定。 假设 IBC 协议正确实现，则参与者永远不会面临因拜占庭行、验证人提交的虚假交易或由不明确的假定正确的链所带来的应用层面的违规增发的风险。 假定正确性对于在所预期的大型网络拓扑中互联的区块链来讲尤为重要，在这种拓扑中，偶尔可能会有一些链和验证人集合出现拜占庭行为——IBC 较保守的实现，一定程度上限制了风险并和可能造成的危害。

### 授权的局部性

通过 IBC 的行为（例如建立连接、创建通道或发送数据包）是需要通过参与连接的两条链上的状态机和参与者进行本地化授权的。 各个链可以选择要求许可机制（例如治理）对特定的应用层操作（例如委托安全度的削减）进行批准，但是对于基本协议而言，操作是无需经过许可的——默认情况下 ，无需任何批准即可创建连接、创建通道和发送数据包。 当然，用户自己必须检查每个 IBC 连接的状态和共识，自行决定这个连接是否足够安全能够被使用（例如，其存储的状态是受信的）。

## 效能

IBC 被设计为一种高效的协议：链间数据和资产中继的摊销成本应主要包括底层状态交易和与数据包相关的操作（例如通证转移）的成本，以及一些较小的固定开销。
